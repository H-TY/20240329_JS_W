<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>

        // 功能函數設定
        function l(x) { document.write(`<br><br>${x}●<hr>`) }
        function b() { document.write(`<br>`) }
        function c(x) { console.log(x) }
        function d(x) { document.write(x) }
        function cd(x) { console.log(x); document.write(x) }




        let text = '  Abc Def GHI KlK    '

        // .trim() 移除前後空白
        text = text.trim()
        console.log(text)
        document.write(text)


        l(1)


        // .toUpperCase() 轉大寫
        text = text.toUpperCase()
        console.log(text)
        document.write(text)


        l(2)


        // .toLowerCase() 轉小寫
        text = text.toLowerCase()
        console.log(text)
        document.write(text)


        l(3)


        // 串聯寫法，前提資料型態需一致
        text = text.toLowerCase().toLowerCase().toUpperCase()
        console.log(text)
        document.write(text)


        l(4)


        let text2 = '外賣 咖哩拌飯 咖哩烏冬'

        // .includes(尋找文字, 從第幾個字開始)
        // 檢查是否有包含所尋找的文字，回傳 boolean
        // 第二個參數是選填，預設是 0 
        // let includesCurry = text2.includes('咖哩')
        let includesCurry = text2.includes('咖哩', 9)
        console.log(includesCurry)
        document.write(includesCurry)


        l(5)


        // .indexOf(尋找文字, 從第幾個字開始)
        // 檢查是否有包含所尋找的文字，回傳第一個符合的索引，-1 代表找不到
        // 第二個參數是選填，預設是 0 
        let indexCurry = text2.indexOf('咖哩')
        console.log(indexCurry)
        document.write(indexCurry)

        b(); b()

        // .lastIndexOf(搜尋內容, 從第幾個開始)
        // 尋找陣列是否有東西符合搜尋內容，回傳最後一個符合的索引，-1 代表找不到 (從後面開始往前找)
        // 第二個參數是選填，預設為 array.length - 1
        let lastindexCurry = text2.lastIndexOf('咖哩')
        cd(lastindexCurry)


        l(6)


        // .match(正則表達式Regex)
        // 符合的結果會用陣列回傳
        // g = 尋找多個結果
        let machCurry = text2.match(/咖哩/g)
        console.log(machCurry)
        document.write(machCurry)


        l(7)


        // .matchAll(正則表達式Regex)
        // 一定要使用 g
        // 結果會是 RegExpStringIterator，只能用迴圈取資料
        let machAllCurry = text2.matchAll(/咖哩/g)
        console.log(machAllCurry)
        document.write(machAllCurry)
        b()
        for (const a of machAllCurry) {
            console.log(a)
            document.write(a)
        }


        l(8)


        // .replace(搜尋文字, 取代文字)
        // 只會取代第一個符合的文字
        let replaceCurry = text2.replace('咖哩', '三色豆')
        console.log(replaceCurry)
        document.write(replaceCurry)


        l(9)

        // .replace(Regex, 取代文字)
        // 如果 Regex 有設定 g ，就會全部取代
        let replaceCurry2 = text2.replace(/咖哩/g, '三色豆')
        console.log(replaceCurry2)
        document.write(replaceCurry2)


        l(10)

        let email = 'aaaa@gmail.com'
        let emailMatch = email.match(/^[0-9a-zA-Z]+@[0-9a-z]+\.[0-9a-z]+$/g)
        console.log(emailMatch)
        document.write(emailMatch)


        l(11)


        const emailRegexGroup = /^([0-9a-z]+)@([0-9a-z]+)\.([0-9a-z]+)$/g
        let emailMatchAllGroup = email.matchAll(emailRegexGroup)
        for (const match of emailMatchAllGroup) {
            // 0: "aaaa@gmail.com"
            // 1: "aaaa"
            // 2: "gmail"
            // 3: "com"
            // group: undefind
            // index: 0
            console.log(match)
            document.write(match)
        }
        b()
        // Regex () 群組找到的東西可以用 $數字 代表
        let emailReplaceGroup = email.replace(emailRegexGroup, '帳號是 $1，網域是 $2.$3')
        console.log(emailReplaceGroup)
        document.write(emailReplaceGroup)


        l(12)


        // 在小括號加 ?<文字>，群組內就會顯示
        const emailRegexGroup2 = /^(?<account>[0-9a-z]+)@(?<domain>[0-9a-z]+)\.(?<tld>[0-9a-z]+)$/g
        let emailMatchAllGroup2 = email.matchAll(emailRegexGroup2)
        for (const match of emailMatchAllGroup2) {
            // 0: "aaaa@gmail.com"
            // 1: "aaaa"
            // 2: "gmail"
            // 3: "com"
            // group: {
            //     account: "aaa",
            //     domain: "gmail",
            //     tld: "com"
            // }
            // index: 0
            console.log(match)
            document.write(match)
        }
        b()
        // Regex () 群組找到的東西可以用 $<群組名稱> 代表
        let emailReplaceGroup2 = email.replace(emailRegexGroup2, '帳號是 $<account>，網域是 $<domain>.$<tld>')
        console.log(emailReplaceGroup2)
        document.write(emailReplaceGroup2)


        l(13)


        let text3 = 'abcdefg'
        //           0123456

        // .substr(開始位置, 長度)
        // 位置可以放負數，代表倒數，-1 是倒數第一個字
        // 長度不寫會直接取到結尾
        console.log(text3.substr(3, 1)) // d
        document.write(text3.substr(3, 1))
        b()
        console.log(text3.substr(3))    // defg
        document.write(text3.substr(3))
        b()
        // text3.substr(-3, 2)
        // text3.length = 7
        // -3 => 7-3 => 4
        // 等同於 text3.substr(4, 2)
        c(text3.substr(-3, 2))  // ef
        d(text3.substr(-3, 2))

        l(14)

        // .substring(開始位置, 結束位置)
        // 不包含結束位置
        // 結束位置不寫，會直接取到結尾
        // 不可以放負數
        c(text3.substring(2, 6))    // cdef
        d(text3.substring(2, 6))

        l(15)

        // .slice(開始位置, 結束位置)
        // 不包含結束位置
        // 結束位置不寫，會直接取到結尾
        // 位置可以放負數
        c(text3.slice(2, 6))    // cdef
        d(text3.slice(2, 6))
        b()
        // text3.slice(-4, -2)
        // text3.length = 7
        // -4 => 7-4 => 3
        // -2 => 7-2 => 5
        // 等同於 text3.substr(3, 5)
        c(text3.slice(-4, -2))  // de
        d(text3.slice(-4, -2))


        l(16)


        const num1 = '123456.789'
        // 無條件捨去轉整數
        c(parseInt(num1))
        d(parseInt(num1))
        b()
        // 轉成小數
        c(parseFloat(num1))
        d(parseFloat(num1))
        b()
        // 用運算子轉成數字（文字轉數字）
        c(num1 * 1)
        d(num1 * 1)
        b()
        // 用 Number 轉成數字（文字轉數字）
        c(Number(num1))
        d(Number(num1))


        l(17)


        const num2 = 'abcd'
        // 無條件捨去轉整數
        c(parseInt(num2))
        d(parseInt(num2))
        b()
        // 轉成小數
        c(parseFloat(num2))
        d(parseFloat(num2))
        b()
        // 用運算子轉成數字（文字轉數字）
        c(num2 * 1)
        d(num2 * 1)
        b()
        // 用 Number 轉成數字（文字轉數字）
        c(Number(num2))
        d(Number(num2))

        console.log(num2 * 1 === NaN)   // false
        console.log(isNaN(num2 * 1))    // true


        l(18)


        let text4 = 'aaa,bbb,ccc'
        // .split(文字)
        // 以文字分割成陣列
        cd(text4.split(','))
        b()
        let filename = 'dalkjsdjaodpod.ffj;;ka.fkfpok..jpg'
        let filenameArray = filename.split('.')
        cd(filenameArray)
        b()
        cd(filenameArray[filenameArray.length - 1])
        b()
        cd(filenameArray.at(-1))
        b()
        cd(filename.split('.').at(-1))


    </script>
</body>

</html>